# SPDX-FileCopyrightText: gb-dispatch-model contributors
#
# SPDX-License-Identifier: CC0-1.0

# New boundary definition, filtering using boundary capabilities defined in the ETYS 2021 report.

run:
  name: "GB-ETYS-subset"

urls:
  gb-etys-boundaries: https://api.neso.energy/dataset/997f4820-1ad4-499b-b1fe-4b8d3d7fbc72/resource/e914fcec-1dc9-4f1f-97e7-59c0d9521bea/download/etys-boundary-gis-data-mar25.zip
  etys: https://www.neso.energy/document/223046/download # ETYS November 2021

clustering:
  simplify_network:
    to_substations: false
    remove_stubs: false
    remove_stubs_across_borders: false
# docs in https://pypsa-eur.readthedocs.io/en/latest/configuration.html#electricity
electricity:
  voltages: [132, 220., 300., 330., 380., 400., 500., 750.]
  base_network: osm-raw

# Manual region merging configuration
region_operations:
  filter_boundaries_using_capabilities: true
  splits:
  - region: 2
    type: "vertical"
    coordinate: -2.325
  - region: 8
    type: "horizontal"
    coordinate: 53.1
  # Groups of regions to merge together
  merge_groups:
  - id: B13-SC1
    merge: [0]
    TO: NGET
  - id: SC1-B13
    merge: [1]
    TO: NGET
  - id: B9-SW1-EC5-B13-LE1-SC1.5
    merge: [2ws, 2e, 3]
    TO: NGET
  - id: SW1-B9
    merge: [2wn, 4, 5, 6]
    TO: NGET
  - id: B9-B8-NW3
    merge: [7, 8s]
    TO: NGET
  - id: B8-NW3-B7a
    merge: [8n]
    TO: NGET
  - id: NW3-NW2
    merge: [9]
    TO: NGET
  - id: NW2-NW1
    merge: [10, 45]
    TO: NGET
  - id: NW1
    merge: [44]
    TO: NGET
  - id: SC1.5-B13-LE1
    merge: [39, 40, 56, 57]
    TO: NGET
  - id: LE1-SC2-SC3
    merge: [37, 38]
    TO: NGET
  - id: SC3-SC2
    merge: [36]
    TO: NGET
  - id: SC2-SC3
    merge: [32, 33, 34, 35, 42, 59, 60]
    TO: NGET
  - id: LE1-B14-SC3-SC1.5
    merge: [30, 41, 43, 61, 62]
    TO: NGET
  - id: B14
    merge: [31]
    TO: NGET
  - id: EC5
    merge: [29, 63]
    TO: NGET
  - id: B7a-B6
    merge: [11]
    TO: NGET

  - id: B6-B5
    merge: [12]
    TO: SPTL
  - id: B5-B4
    merge: [13]
    TO: SPTL

  - id: B3b
    merge: [15, 16, 17, 18, 19, 20, 21, 22, 23, 49, 50]
    TO: SHETL
  - id: B4-B2-B3b
    merge: [14]
    TO: SHETL
  - id: B2-B1a
    merge: [24]
    TO: SHETL
  - id: B1a-B0
    merge: [25, 28, 51, 52, 53, 54, 55]
    TO: SHETL
  - id: B0
    merge: [26, 27, 58]
    TO: SHETL

  # TODO: add this to Ireland
  - id: NI
    merge: [46, 47, 48]
    TO: N-IRL

  etys_boundaries:
    B3b:
    - bus0: B3b
      bus1: B4-B2-B3b
    - bus0: B3b
      bus1: B6-B5
    B4:
    - bus0: B4-B2-B3b
      bus1: B5-B4
    B5:
    - bus0: B5-B4
      bus1: B6-B5
    B6:
    - bus0: B6-B5
      bus1: B7a-B6
    B7a:
    - bus0: B7a-B6
      bus1: B8-NW3-B7a
    B8:
    - bus0: B8-NW3-B7a
      bus1: B9-B8-NW3
    - bus0: NW3-NW2
      bus1: B9-B8-NW3
    B9:
    - bus0: B9-B8-NW3
      bus1: B9-SW1-EC5-B13-LE1-SC1.5
    - bus0: B9-B8-NW3
      bus1: SW1-B9
    B0:
    - bus0: B0
      bus1: B1a-B0
    EC5:
    - bus0: B9-SW1-EC5-B13-LE1-SC1.5
      bus1: EC5
    LE1:
    - bus0: B9-SW1-EC5-B13-LE1-SC1.5
      bus1: LE1-B14-SC3-SC1.5
    - bus0: LE1-SC2-SC3
      bus1: SC1.5-B13-LE1
    - bus0: B14
      bus1: B9-SW1-EC5-B13-LE1-SC1.5
    B13:
    - bus0: B9-SW1-EC5-B13-LE1-SC1.5
      bus1: SC1-B13
    - bus0: B13-SC1
      bus1: SC1.5-B13-LE1
    SC1.5:
    - bus0: B9-SW1-EC5-B13-LE1-SC1.5
      bus1: SC1.5-B13-LE1
    - bus0: SC2-SC3
      bus1: SC3-SC2
    - bus0: B13-SC1
      bus1: SC1.5-B13-LE1
    SW1:
    - bus0: B9-SW1-EC5-B13-LE1-SC1.5
      bus1: SW1-B9
    - bus0: B9-B8-NW3
      bus1: SW1-B9
    SC2:
    - bus0: LE1-B14-SC3-SC1.5
      bus1: LE1-SC2-SC3
    - bus0: LE1-SC2-SC3
      bus1: SC1.5-B13-LE1
    - bus0: SC2-SC3
      bus1: SC3-SC2
    SC3:
    - bus0: LE1-B14-SC3-SC1.5
      bus1: SC2-SC3
    - bus0: LE1-SC2-SC3
      bus1: SC3-SC2
    SC1:
    - bus0: B13-SC1
      bus1: SC1-B13
    - bus0: SC2-SC3
      bus1: SC3-SC2
    - bus0: B9-SW1-EC5-B13-LE1-SC1.5
      bus1: SC1.5-B13-LE1
    - bus0: LE1-B14-SC3-SC1.5
      bus1: LE1-SC2-SC3
    NW2:
    - bus0: NW2-NW1
      bus1: NW3-NW2
    - bus0: B8-NW3-B7a
      bus1: NW2-NW1
    NW3:
    - bus0: B8-NW3-B7a
      bus1: NW3-NW2
    - bus0: NW3-NW2
      bus1: B9-B8-NW3
      # maybe not?
    - bus0: B8-NW3-B7a
      bus1: NW2-NW1
    B14:
    - bus0: B14
      bus1: B9-SW1-EC5-B13-LE1-SC1.5
    - bus0: B14
      bus1: LE1-B14-SC3-SC1.5
    B1a:
    - bus0: B1a-B0
      bus1: B2-B1a
    - bus0: B1a-B0
      bus1: B4-B2-B3b
    B2:
    - bus0: B2-B1a
      bus1: B4-B2-B3b
    - bus0: B1a-B0
      bus1: B4-B2-B3b
    NW1:
    - bus0: NW1
      bus1: NW2-NW1
